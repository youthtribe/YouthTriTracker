!function e(t,r,a){function i(n,s){if(!r[n]){if(!t[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[n]={exports:{}};t[n][0].call(u.exports,function(e){var r=t[n][1][e];return i(r?r:e)},u,u.exports,e,t,r,a)}return r[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)i(a[n]);return i}({1:[function(e,t,r){"use strict";angular.module("youthTribe").controller("activityController",["$scope","$http","firebaseFactory",function(e,t,r){r.init(e.$parent),e.activity={type:"swim",date:new Date(Date.now())},e.profile=r.getProfile(),e.findAge=function(){var t,r=+new Date(e.profile.dateOfBirth),a=new Date(Date.now()).getYear()+1900;return t=~~((new Date("12/31/"+a)-r)/315576e5),t>12?t=12:5>t&&(t=5),t},e.addActivity=function(){var t,a=e.findAge();e.activity.date=e.activity.date.toLocaleDateString("en-US"),$("#lengthOrDistance").prop("checked")&&e.convertTimeToDistance(a,e.activity.type,e.activity.length),t=r.getLeaderboardForUser(e.profile.username),t.$loaded(function(){var i=r.getLeaderboardRefForUser(e.profile.username),o={ageGroup:a};o[e.activity.type]=t[e.activity.type],o[e.activity.type]||(o[e.activity.type]=0),o[e.activity.type]+=e.activity.length,t[e.activity.type]=o[e.activity.type],i.update(o,function(){var i,o=r.getActivities().push(e.activity);i=o.key(),o.update({uniqueKey:i},function(){e.activity={type:"swim"};var i=r.getGoalsForAgeData(a);i.$loaded(function(){var a=r.getRewards();a.$loaded(function(){a.forEach(function(r){r.manual||e.profile.medals&&e.profile.medals[r.uniqueKey]||("-KC6tUL4dJZd71v7i8gQ"===r.uniqueKey?e.addMedal(r):"-KC6tULBEFv1hQVAp3y9"===r.uniqueKey?t.bike>=i.bike.goal&&t.swim>=i.swim.goal&&t.run>=i.run.goal&&e.addMedal(r):"-KC6tULBEFv1hQVAp3yA"===r.uniqueKey?t.run>=i.run.goal&&e.addMedal(r):"-KC6tULD7WVxR4kQ03Rv"===r.uniqueKey?t.bike>=i.bike.goal&&e.addMedal(r):"-KC6tULFjKz7XElrgwep"===r.uniqueKey?t.swim>=i.swim.goal&&e.addMedal(r):"-KC6tULG72__eVYGUb8i"===r.uniqueKey?t.run>=2*i.run.goal&&e.addMedal(r):"-KC6tULHR3SH-cAA9TEY"===r.uniqueKey?t.bike>=2*i.bike.goal&&e.addMedal(r):"-KC6tULItECJnV32J3og"===r.uniqueKey?t.swim>=2*i.swim.goal&&e.addMedal(r):"-KC6tULKV3iqkggzF7-R"===r.uniqueKey?t.bike>=24.8&&t.swim>=1500&&t.run>=6.2&&e.addMedal(r):"-KC6tULLIEIpyt1bLwgK"===r.uniqueKey?t.bike>=56&&t.swim>=1900&&t.run>=13.1&&e.addMedal(r):"-KC6tULMdcDcGlArwWD7"===r.uniqueKey&&t.bike>=112&&t.swim>=3800&&t.run>=26.2&&e.addMedal(r))}),e.navDashboard()})})})})})},e.addMedal=function(e){var t=r.getProfileMedalsFirebase(),a={};a[e.uniqueKey]=e,a[e.uniqueKey].date=new Date,t.update(a)},$("#lengthOrDistance").change(function(){$("#lengthOrDistance").prop("checked")?e.convertDistanceToTime(e.findAge(),e.activity.type,e.activity.length):e.convertTimeToDistance(e.findAge(),e.activity.type,e.activity.length),e.$apply()}),e.viewData=r.getViewData(),e.convertTimeToDistance=function(t,r,a){function i(e,t,a,i){switch(r){case"swim":return e*t;case"bike":return a/60*e;case"run":return e/i}}e.activity.length=i(a,e.viewData.goals["age_"+t].swim.conversion/10,e.viewData.goals["age_"+t].bike.conversion,e.viewData.goals["age_"+t].run.conversion)},e.convertDistanceToTime=function(t,r,a){function i(e,t,a,i){switch(r){case"swim":return e/t;case"bike":return e/(a/60);case"run":return e*i}}e.activity.length=i(a,e.viewData.goals["age_"+t].swim.conversion/10,e.viewData.goals["age_"+t].bike.conversion,e.viewData.goals["age_"+t].run.conversion)}}])},{}],2:[function(e,t,r){"use strict";e("./activityController"),e("./dashboardController"),e("./faqController"),e("./firebaseFactory"),e("./loginController"),e("./profileController"),e("./profilesController"),e("./registerController"),e("./rewardsController"),e("./routes"),angular.module("youthTribe",["ionic","firebase","ui.router","youthTribeRoutes"]).run(function(e,t,r,a,i){t.$on("$viewContentLoaded",function(){i.scrollTop(!1)}),e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),window.$scope=t,t.$state=r,t.$stateParams=a})})},{"./activityController":1,"./dashboardController":3,"./faqController":4,"./firebaseFactory":5,"./loginController":6,"./profileController":7,"./profilesController":8,"./registerController":9,"./rewardsController":10,"./routes":11}],3:[function(e,t,r){"use strict";angular.module("youthTribe").controller("dashboardController",["$scope","$http","firebaseFactory","$state",function(e,t,r,a){e.dashboard={swimCompleted:0,bikeCompleted:0,runCompleted:0,runGoal:26,bikeGoal:50,swimGoal:3e3,startDate:"",endDate:"",inDateRange:!1,daysRemaining:0,age:0,activities:[{}]},r.init(e.$parent),r.getFirebaseActivities().$loaded().then(function(t){r.getViewData().$loaded().then(function(a){r.getProfile().$loaded().then(function(r){e.profile=r,e.dashboard.age=e.findAge(),e.viewData=a,e.dashboard.username=a.leaderboard.username,e.loadGoals(),e.dashboard.activities=t,e.sumActivities()})})}),r.getRestrictDates().$loaded().then(function(t){e.dashboard.startDate=t.startDate,e.dashboard.endDate=t.endDate;var r,a,i=864e5,o=new Date(t.endDate),n=new Date(t.startDate),s=new Date;s.setHours(0,0,0,0),r=Math.round(Math.abs((o.getTime()-s.getTime())/i)),a=s>=n&&o>=s,e.dashboard.inDateRange=a,e.dashboard.daysRemaining=r}),e.goLeaderboard=function(e){a.go("dashboard.id",{id:e.uniqueKey})},e.goProfiles=function(){a.go("profiles")},e.findAge=function(){var t,r=+new Date(e.profile.dateOfBirth),a=new Date(Date.now()).getYear()+1900;return t=~~((new Date("12/31/"+a)-r)/315576e5),t>12?t=12:5>t&&(t=5),t},e.sumActivities=function(){var t,r,a=/-/,i=[],o=[],n=["swim","bike","run"];for(t in e.dashboard.activities)e.dashboard.activities.hasOwnProperty(t)&&a.test(t)&&i.push(t);for(r=0;r<i.length;r++)o.push(e.dashboard.activities[i[r]]);$.each(n,function(t){e.dashboard[n[t]+"Completed"]=o.filter(function(e){return e.type===n[t]}).reduce(function(e,t){return e+t.length},0)})},e.loadGoals=function(){var t=e.dashboard.age;e.dashboard.swimGoal=e.findGoal(t,"swim"),e.dashboard.bikeGoal=e.findGoal(t,"bike"),e.dashboard.runGoal=e.findGoal(t,"run")},e.findGoal=function(t,r){try{return e.viewData.goals["age_"+t][r].goal}catch(a){}},e.hasActivities=!1,e.haveActivities=function(){e.hasActivities=!0}}])},{}],4:[function(e,t,r){"use strict";angular.module("youthTribe").controller("faqController",["$scope",function(e){e.faqs=[{q:"This is question 1, it could get to be a longer question. I am going to keep typing in order to get this text field longer for long questions.",a:"answer0"},{q:"This is question 2",a:"answer1"},{q:"This is question 3",a:"answer2"}]}])},{}],5:[function(e,t,r){"use strict";angular.module("youthTribe").factory("firebaseFactory",["$firebaseArray","$firebaseObject","$firebaseAuth","$state","$stateParams",function(e,t,r,a,i){var o="https://sweltering-fire-6401.firebaseio.com",n=new Firebase(o),s=r(n);return{object:t,array:e,init:function(e){if(!a.includes("login"))if(s.$getAuth())if(i.uid=s.$getAuth().uid,i.id||a.includes("login")||a.includes("register")||a.includes("profiles"));else{var r=t(new Firebase(o+"/users/"+i.uid));r.firstName?a.go("profiles"):a.go("login")}else a.includes("register")||a.includes("login")||a.go("login");e.navLogout=function(){i.uid=null,s.$unauth(),a.go("login")},e.navLogin=function(){a.go("login")},e.navFaq=function(){a.go("faq.id",{id:i.id})},e.navLegal=function(){a.go("legal.id",{id:i.id})},e.navProfiles=function(){a.go("profiles")},e.navDashboard=function(){a.go("dashboard.id",{id:i.id})},e.navProfile=function(){a.go("profile.id",{id:i.id})},e.navRewards=function(){a.go("rewards.id",{id:i.id})},e.navActivity=function(){a.go("activity.id",{id:i.id})},e.navLeaderboard=function(){a.go("leaderboard.id",{id:i.id})}},isLoggedIn:function(){return!!s.$getAuth()},auth:s,getProfile:function(){return t(new Firebase(o+"/users/"+s.$getAuth().uid+"/children/"+i.id))},getChildren:function(){return new Firebase(o+"/users/"+s.$getAuth().uid+"/children")},getChildrenData:function(){return t(new Firebase(o+"/users/"+s.$getAuth().uid+"/children"))},getAuth:s.$getAuth,getUser:function(){var e=this.user();return t(e)},user:function(){return this.newUser(s.$getAuth().uid)},newUser:function(e){return new Firebase(o+"/users/"+e)},getView:function(){return new Firebase(o+"/view")},getGoalsForAgeData:function(e){return t(new Firebase(o+"/view/goals/age_"+e))},getViewData:function(){return t(this.getView())},getProfileMedalsFirebase:function(){return new Firebase(o+"/users/"+s.$getAuth().uid+"/children/"+i.id+"/medals")},getProfileManualMedalsFirebase:function(){return new Firebase(o+"/users/"+s.$getAuth().uid+"/children/"+i.id+"/manualMedal")},getProfileFirebase:function(){return new Firebase(o+"/users/"+s.$getAuth().uid+"/children/"+i.id)},getProfileData:function(){return t(this.getProfileFirebase())},getFirebaseActivities:function(){return t(this.getActivities())},getActivities:function(){return new Firebase(o+"/users/"+s.$getAuth().uid+"/children/"+i.id+"/activities")},getRoot:function(){return new Firebase(o)},getRewards:function(){return t(this.getRewardsRef())},getRewardsRef:function(){return new Firebase(o+"/view/rewards")},getLeaderboardForUser:function(e){return t(this.getLeaderboardRefForUser(e))},getLeaderboardRefForUser:function(e){return new Firebase(o+"/view/leaderboard/"+e)},getRestrictDates:function(){return t(this.getRestrictDatesFirebase())},getRestrictDatesFirebase:function(){return new Firebase(o+"/view/restrictDates")}}}])},{}],6:[function(e,t,r){"use strict";angular.module("youthTribe").controller("loginController",["$scope","$http","$state","firebaseFactory",function(e,t,r,a){a.init(e.$parent),e.register=function(){r.go("register")},e.loginFunction=function(){$(".spinner").fadeTo("slow",1),e.errorMessage=null,a.getRoot().authWithPassword(e.loginData,function(t){$(".spinner").fadeOut("fast"),t&&"INVALID_PASSWORD"===t.code?(e.errorMessage="Whoops! The password is not right. Please try again.",e.$apply()):r.go("profiles")})}}])},{}],7:[function(e,t,r){"use strict";angular.module("youthTribe").controller("profileController",["$scope","$http","firebaseFactory",function(e,t,r){r.init(e.$parent),e.profile=r.getProfile(),e.viewMedals=[[]],e.viewManualMedals=[[]],e.profile.$loaded().then(function(){switch($.each(e.profile.medals,function(t,r){var a=new Date(r.date),i=e.viewMedals[e.viewMedals.length-1];r.viewDate=a.getMonth()+"/"+a.getDay()+"/"+a.getFullYear(),3===i.length&&e.viewMedals.push([]),e.viewMedals[e.viewMedals.length-1].push(r)}),$.each(e.profile.manualMedal,function(t,r){var a=new Date(r.date),i=e.viewManualMedals[e.viewManualMedals.length-1];r.viewDate=a.getMonth()+"/"+a.getDay()+"/"+a.getFullYear(),3===i.length&&e.viewManualMedals.push([]),e.viewManualMedals[e.viewManualMedals.length-1].push(r)}),e.profile.avatar){case 1:e.imgPath="img/girl1.svg";break;case 2:e.imgPath="img/girl2.svg";break;case 3:e.imgPath="img/boy1.svg";break;case 4:e.imgPath="img/boy2.svg"}e.editBio=function(){e.editMode=!0},e.saveBio=function(){e.editMode=!1,r.getProfileFirebase().update({bio:e.profile.bio})},e.findAge=function(){var t=+new Date(e.profile.dateOfBirth),r=new Date(Date.now()).getYear()+1900;return~~((new Date("12/31/"+r)-t)/315576e5)},e.showHoverDesc=function(e){$(".img-hover-desc").addClass("hidden"),$("."+e).removeClass("hidden")},e.closePopover=function(e){$("."+e).hasClass("hidden")||$("."+e).addClass("hidden")}})}])},{}],8:[function(e,t,r){"use strict";angular.module("youthTribe").controller("profilesController",["$scope","$http","firebaseFactory","$state",function(e,t,r,a){r.init(e.$parent),e.children=r.getChildrenData(),e.imageCheckboxHandler=function(t){$(".avatar-input").val(t),$("#avatar-1").css("border",""),$("#avatar-2").css("border",""),$("#avatar-3").css("border",""),$("#avatar-4").css("border",""),$("#avatar-"+t).css("border","5px solid black"),e.newChild.avatar=t},e.createChild=function(){if($(".profiles-input").each(function(){""===$(this).val()?$(this).closest(".form-group").addClass("has-error has-feedback"):$(this).closest(".form-group").removeClass("has-error has-feedback")}),!$(".newChildClass").find(".has-error").length){var t,a,i=r.getChildren();e.newChild.dateOfBirth=e.newChild.dateOfBirth.toLocaleDateString("en-US"),t=i.push(e.newChild),a=t.key(),t.update({uniqueKey:a}),e.newChild={},e.addChild=!1}},e.chooseChild=function(e){a.go("dashboard.id",{id:e.uniqueKey})}}])},{}],9:[function(e,t,r){"use strict";angular.module("youthTribe").controller("registerController",["$scope","$http","firebaseFactory","$state",function(e,t,r,a){r.init(e.$parent),e.registerData={},e.isLiabilityUnChecked=function(){var e=document.getElementById("liabilityCheckBox").checked;return!e},e.register=function(){return e.errorMessage=null,e.isLiabilityUnChecked()&&(e.errorMessage="Must read and agree to the terms."),$(".form-control").each(function(){$(this).closest(".form-group").removeClass("has-error has-feedback"),""===$(this).val()&&($(this).closest(".form-group").addClass("has-error has-feedback"),e.errorMessage="Please fill out every box")}),e.errorMessage?!1:void(e.registerData.password===e.registerData.confirmPassword?r.getRoot().createUser({email:e.registerData.email,password:e.registerData.password},function(t,i){t?e.$apply(function(){e.errorMessage="Uh oh! "+t.message}):r.getRoot().authWithPassword({email:e.registerData.email,password:e.registerData.password},function(t){t?console.log("Login Failed!",t):r.newUser(i.uid).update({firstName:e.registerData.firstName,lastName:e.registerData.lastName},function(){a.go("profiles")})})}):($(".password").addClass("has-error has-feedback"),e.errorMessage="Make sure your passwords are matching!"))}}])},{}],10:[function(e,t,r){"use strict";angular.module("youthTribe").controller("rewardsController",["$scope","$http","firebaseFactory",function(e,t,r){r.init(e.$parent),e.rewards=r.getRewards(),e.showManualRewardForm=function(e){var t=$(".manual-reward-form-"+e.uniqueKey).hasClass("hidden");$(".manual-reward-form").addClass("hidden"),$(".manual-reward-form-"+e.uniqueKey).toggleClass("hidden",!t)},e.addManualReward=function(e,t){var a,i,o=r.getProfileManualMedalsFirebase();a=o.push(e),i=a.key(),a.update({uniqueKey:i,date:t.dateAwarded,eventName:t.eventName}),$(".manual-reward-form").hide()}}])},{}],11:[function(e,t,r){"use strict";angular.module("youthTribeRoutes",["ui.router"]).config(function(e,t){t.otherwise("/dashboard"),e.state("login",{url:"/login",controller:"loginController",templateUrl:"views/login.html"}).state("faq",{url:"/faq",controller:"faqController",templateUrl:"views/faq.html"}).state("faq.id",{url:"/:id",controller:"faqController",templateUrl:"views/faq.html"}).state("register",{url:"/register",controller:"registerController",templateUrl:"views/register.html"}).state("profiles",{url:"/profiles",controller:"profilesController",templateUrl:"views/profiles.html"}).state("dashboard",{url:"/dashboard",controller:"dashboardController",templateUrl:"views/dashboard.html"}).state("dashboard.id",{url:"/:id",controller:"dashboardController",templateUrl:"views/dashboard.html"}).state("profile",{url:"/profile",controller:"profileController",templateUrl:"views/profile.html"}).state("profile.id",{url:"/:id",controller:"profileController",templateUrl:"views/profile.html"}).state("rewards",{url:"/rewards",controller:"rewardsController",templateUrl:"views/rewards.html"}).state("rewards.id",{url:"/:id",controller:"rewardsController",templateUrl:"views/rewards.html"}).state("activity",{url:"/activity",controller:"activityController",templateUrl:"views/activity.html"}).state("activity.id",{url:"/:id",controller:"activityController",templateUrl:"views/activity.html"})})},{}]},{},[2]);